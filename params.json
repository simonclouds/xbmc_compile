{"name":"Xbmc compile","tagline":"How to compile xbmc for ubuntu and android.","body":"# Xbmc 源码编译\r\n\r\n------------------------------\r\n\r\n## XBMC简介\r\n### xbmc \r\n> XBMC 是一个优秀的自由和开源的（GPL）媒体中心软件。XBMC最初是microsoft为Xbox而开发，现在可以运行在Linux、OSX、Windows系统。  \r\n<http://xbmc.org/about/>\r\n\r\n### xbmc 相关\r\n* [xbmcbuntu](http://wiki.xbmc.org/?title=XBMCbuntu)\r\n* [raspbmc](http://www.raspbmc.com/about/)\r\n\r\n--------------------\r\n## 源码下载\r\n* download xbmc  \r\n>\t命令行使用git 下载  \r\n\r\n\tcd ~  \r\n\tgit clone git://github.com/xbmc/xbmc.git\r\n\r\n* 版本管理工具 [Git](http://baike.baidu.com/view/1531489.htm#1)简介  \r\n>NOTICE: *compile for linux and android use this same package*\r\n\r\n------------------------\r\n##Compile for linux\r\n###环境\r\n>ubuntu 12.04 64位 x86\r\n\r\n###编译步骤\r\n#### 1. Installing the required Ubuntu packages\r\n> 对于老版本的ubuntu，有些包可能没有更新过时了。可以手动编译那些软件包，也可以使用team-xbmc官方的[PPA](http://launchpad.net/~team-xbmc/+archive/ppa).\r\n\r\n>**两种方法install required packages.**\r\n\r\n*(1) Copy and paste the following line corresponding to your system*\r\n\r\n>For Ubuntu (all versions >= 7.04):\r\n\r\n\tsudo apt-get install git-core build-essential gawk pmount libtool nasm yasm automake cmake gperf zip unzip bison libsdl-dev libsdl-image1.2-dev libsdl-gfx1.2-dev libsdl-mixer1.2-dev libfribidi-dev liblzo2-dev libfreetype6-dev libsqlite3-dev libogg-dev libasound2-dev python-sqlite libglew-dev libcurl3 libcurl4-gnutls-dev libxrandr-dev libxrender-dev libmad0-dev libogg-dev libvorbisenc2 libsmbclient-dev libmysqlclient-dev libpcre3-dev libdbus-1-dev libhal-dev libhal-storage-dev libjasper-dev libfontconfig-dev libbz2-dev libboost-dev libenca-dev libxt-dev libxmu-dev libpng-dev libjpeg-dev libpulse-dev mesa-utils libcdio-dev libsamplerate-dev libmpeg3-dev libflac-dev libiso9660-dev libass-dev libssl-dev fp-compiler gdc libmpeg2-4-dev libmicrohttpd-dev libmodplug-dev libssh-dev gettext cvs python-dev libyajl-dev libboost-thread-dev libplist-dev libusb-dev libudev-dev libtinyxml-dev libcap-dev curl swig default-jre\r\n\r\n>For >= 10.10:  \r\n\r\n\tsudo apt-get install autopoint libltdl-dev\r\n\r\n>On 8.10 and older versions, libcurl is outdated and thus XBMC will not compile properly.In this case you will have to manually compile the latest version.  \r\n\r\n    wget http://curl.sourceforge.net/download/curl-7.19.7.tar.gz\r\n    tar -xzf curl-7.19.7.tar.gz\r\n    cd curl-7.19.7\r\n    ./configure --disable-ipv6 --without-libidn --disable-ldap --prefix=/usr\r\n    make\r\n    sudo make install\r\n\r\n>\tWe currently need a version of taglib that has not been packaged yet. We supply a Makefile in lib/taglib to make it easy to install into /usr/local until it is available in apt.  \r\n\r\n\tmake -C lib/taglib\r\n\tsudo make -C lib/taglib install\r\n\r\n>\tUnless you are proficient with how linux libraries and versions work, do not try to provide it yourself.\r\n\r\n*(2) Use a single command to get all build dependencies*\r\n\r\n>\tYou can get all build dependencies used for building the packages on the PPA. For this, you need to specify the PPA in your apt sources. Please find the documentation on how to add a PPA to your system here:<http://launchpad.net/+help/soyuz/ppa-sources-list.html>\r\n\r\n>\tThe PPA used for XBMC (developpement version) is located on the following page:<http://launchpad.net/~team-xbmc/+archive/unstable>\r\n\r\n>**Note 1:**  Click on \"Technical details about this PPA\" to display the sources.list entries.  \r\n**Note 2:**  If you are using a distribution that has outdated libraries, do not forget to use the following ppa: <http://launchpad.net/~team-xbmc/+archive/ppa>\r\n\r\n>\tUpdate apt:\r\n\r\n\tsudo apt-get update\r\n\r\n>\tHere is the magic command to get the build dependencies (used to compile the version on the PPA).  \r\n\r\n\tsudo apt-get build-dep xbmc\r\n\r\n>\tFor Hardy add `deb http://ppa.launchpad.net/team-xbmc/xbmc-ppa-build-depends/ubuntu hardy main` to sources.list.  \r\n>**Avoid using aptitude** for the build-dep command. It doesn't resolve everything.  \r\n>\tFor developers and anyone else who compiles frequently it is recommended to use ccache.\r\n\r\n\tsudo apt-get install ccache\r\n\r\n>\tA **tip** for those with multiple computers at home is to check out distcc (totally unsupported from xbmc of course)  \r\n\r\n    sudo apt-get install distcc\r\n\r\n#### 2. How to compile\r\n\r\n+ \t`cd $HOME/xbmc`\r\n+ \t`./bootstrap`\r\n+ \t`./configure `\r\n+\t`make`\r\n+ \t`sudo make install`\r\n\r\n###出现的问题及解决\r\n1.在执行`./configure` 的时候出现  \r\n>configure error: Could not find a required library. Please see the README for your platform.  \r\n\r\n>分析可能的原因是在安装依赖包的时候出现问题.查看install the required packages.  \r\n\r\n2.在安装依赖包执行很长的那个 `sudo ***`  的时候出现.\r\n>\tThe following packages have unmet dependencies:\r\n\tlibudev-dev : Depends: libudev0 (= 175-0ubuntu9.1) but 175-0ubuntu9.2 is to be installed\r\n\tE: Unable to correct problems, you have held broken packages.\r\n\r\n>分析可能的原因是在执行安装依赖包的时候出现的问题,其软件包应该安装9.1版本,但是只有9.2版本的在等待被安装.跟踪此问题:定位libudev0 : 命令: \r\n\r\n\tlocate libudev0\r\n\r\n>\t得到输出:  \r\n\t/var/cache/apt/archives/libudev0_175-0ubuntu9.2_amd64.deb  \r\n\t/var/cache/apt/archives/libudev0_175-0ubuntu9.2_i386.deb  \r\n\t于是下载libudev0_175-0ubuntu9.2_amd64.deb和libudev0_175-0ubuntu9.2_i386.deb 这两个包,替换掉原来的9.2版本的包.重新安装依赖包.  \r\n>\t当直接安装这两个包时,提示已经安装了更新的版本.于是先卸载...  \r\n\t使用synaptic package manager\r\n\r\n\tsudo apt-get install synaptic\r\n\r\n>\t用synaptic卸载包时,提示:  \r\n>\tCould not apply changes!Fix broken packages first！  \r\n\t菜单栏:Edit-->fix broken packages\r\n\t弹出提示框:  \r\n\tE: Error, pkgProblemResolver::Resolve generated breaks, this may be caused by held packages.  \r\n\tE: Unable to correct dependencies.  \r\n>\t解决1:(root执行)\r\n\r\n\tdpkg --configure -a\r\n\tapt-get update\r\n\r\n>\t再进入synaptic 的时候,标记livudev0进行remove的时候,仍然提示相同的错误.  \r\n\t解决2:将source.list替换回源来的source.list 再\r\n\r\n\tsudo apt-get update\r\n\r\n>\t再卸载libudev0仍然提示broken package!!!!陷坑里去了.于是决定推翻重来.删除xbmc的源码包.从最开始**备份的压缩包**(自己压缩)再重新解压一个文件夹.重来:(.  \r\n\r\n3.重新configure出现问题:  \r\n>\tconfigure: error: == Could not find libssh. ==  \r\n\tsolve:install libssh  \r\n\tdownload [libssh-0-5-2.tar.gz](http://www.libssh.org/2011/09/17/libssh-0-5-2/) and install it use its readme file.\r\n\r\n4.configure 找不到 required program .  \r\n>\tconfigure: error: Could not find a required program. Please see the README for your platform.  \r\n\twhat program missed ? I dont know as well.  \r\n\tDo following step again:\r\n\r\n\tsudo apt-get install git-core build-essential gawk pmount libtool nasm yasm automake cmake gperf zip unzip bison libsdl-dev libsdl-image1.2-dev libsdl-gfx1.2-dev libsdl-mixer1.2-dev libfribidi-dev liblzo2-dev libfreetype6-dev libsqlite3-dev libogg-dev libasound2-dev python-sqlite libglew-dev libcurl3 libcurl4-gnutls-dev libxrandr-dev libxrender-dev libmad0-dev libogg-dev libvorbisenc2 libsmbclient-dev libmysqlclient-dev libpcre3-dev libdbus-1-dev libhal-dev libhal-storage-dev libjasper-dev libfontconfig-dev libbz2-dev libboost-dev libenca-dev libxt-dev libxmu-dev libpng-dev libjpeg-dev libpulse-dev mesa-utils libcdio-dev libsamplerate-dev libmpeg3-dev libflac-dev libiso9660-dev libass-dev libssl-dev fp-compiler gdc libmpeg2-4-dev libmicrohttpd-dev libmodplug-dev libssh-dev gettext cvs python-dev libyajl-dev libboost-thread-dev libplist-dev libusb-dev libudev-dev libtinyxml-dev libcap-dev curl swig default-jre\r\n\r\n>\tterminal download some packages and problem solved.\r\n\tafter that everything goes well till the compiling end.\r\n\r\n---------------------------\r\n##Compile for android \r\n###环境\r\n>\tUbuntu 10.04 64位 X86\r\n\r\n###编译步骤\r\n\r\n####1.install required packages:  \r\n\r\n\tsudo apt-get install build-essential default-jdk git curl autoconf unzip zip zlib1g-dev gawk gperf cmake ia32-libs\r\n\r\n####2.Installing and setting up the Android environment\r\n>Get the Android SDK, go to http://developer.android.com/sdk and\r\ndownload the latest version for your operating system. The Crystax NDK\r\ncan be downloaded from http://www.crystax.net/en/android/ndk  \r\n   \r\n>2.1 Installing Android SDK packages\r\nAfter having extracted the Android SDK to <android-sdk> you need to\r\ninstall some android packages using the Android SDK Manager:\r\n\r\n\t# cd <android-sdk>/tools\r\n\t# ./android update sdk -u -t platform,platform-tool\r\n\r\n>2.2 Setup the Android toolchain\r\n\tTo be able to compile XBMC and the libraries it depends on for the\r\nAndroid platform you first need to setup an Android toolchain using\r\nthe Android NDK which you earlier extracted to <android-ndk>. \r\n\r\n>\tThe following commands will create a toolchain suitable for the most\r\ncommon scenario. The --install-dir option (and therefore the <android-toolchain> value)specifies where the resulting toolchain should be installed (your choice).\r\n\r\n\t# cd <android-ndk>\r\n\t# ls platforms\r\n\t# cd build/tools\r\n\t# ./make-standalone-toolchain.sh --ndk-dir=../../ \\\r\n     --install-dir=<android-toolchain>/android-14 --platform=android-14\r\n\r\n>2.3 Create a (new) debug key to sign debug APKs\r\n\r\n\t# keytool -genkey -keystore ~/.android/debug.keystore -v -alias \\\r\n      androiddebugkey -dname \"CN=Android Debug,O=Android,C=US\" -keypass \\\r\n      android -storepass android -keyalg RSA -keysize 2048 -validity 10000\r\n\r\n####3.Getting the source code  \r\n\r\n\t# cd $HOME\r\n\t# git clone git://github.com/xbmc/xbmc.git xbmc-android\r\n\t# cd xbmc-android\r\n\t# git submodule update --init addons/skin.touched\r\n\r\n####4.compile\r\n>\t4.1 Building dependencies\r\n\r\n\t# cd $HOME/xbmc-android/tools/android/depends\r\n\t# ./bootstrap\r\n\t# ./configure --build=arm-linux-android --with-sdk=/home/$USER/Tools/sdk-android --with-ndk=/home/$USER/Tools/ndk-r7 --with-toolchain=/home/$USER/Tools/android-14 --with-tarballs=/home/$USER/Tools/tarballs\r\n\t# make -j4\r\n\r\n>\t4.2 Building XBMC  \r\n\r\n\t# cd $HOME/xbmc-android\r\n\t# make -C tools/android/depends/xbmc\r\n\r\n###出现的问题及解决\r\n\r\n----------\r\n\r\n2:55 下午 星期五, 十一月 02, 2012\r\n\r\n\r\n\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}